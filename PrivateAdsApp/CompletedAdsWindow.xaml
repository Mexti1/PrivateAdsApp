<Window x:Class="PrivateAdsApp.Windows.CompletedAdsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Завершённые объявления" Height="650" Width="1100" WindowStartupLocation="CenterScreen"
        Background="{StaticResource BackgroundColor}">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Заголовок + общая прибыль -->
        <Border Grid.Row="0"
                Background="{StaticResource SurfaceColor}"
                Padding="20,20"
                Margin="20,20,20,0">
            <Border.Effect>
                <DropShadowEffect ShadowDepth="2" BlurRadius="12" Opacity="0.15" Direction="270"/>
            </Border.Effect>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Image Source="/Resources/vozvrat-tovara.png" Width="60" Margin="0,0,20,0" Grid.Column="0"/>
                <StackPanel Grid.Column="0" VerticalAlignment="Center">
                    <TextBlock Text="Завершённые объявления"
                              FontSize="28"
                              FontWeight="Bold"
                              Foreground="{StaticResource TextPrimaryColor}"/>
                    <TextBlock x:Name="TxtTotalProfit"
                              FontSize="20"
                              FontWeight="Bold"
                              Foreground="{StaticResource SuccessColor}"
                              Margin="0,5,0,0"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Список -->
        <ListView x:Name="LvCompleted"
                 Grid.Row="1"
                 Margin="20"
                 Style="{StaticResource ModernListView}"
                 ItemContainerStyle="{StaticResource ModernListViewItem}">
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="Дата" DisplayMemberBinding="{Binding Ad.PostDate, StringFormat=dd.MM.yyyy}" Width="100"/>
                    <GridViewColumn Header="Заголовок" DisplayMemberBinding="{Binding Ad.Title}" Width="320"/>
                    <GridViewColumn Header="Цена" Width="120">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Ad.Price, StringFormat={}{0:N0} ₽}"
                                          FontWeight="SemiBold"
                                          Foreground="{StaticResource TextPrimaryColor}"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="Прибыль" Width="130">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding ProfitAmount, StringFormat={}{0:N0} ₽}"
                                          FontWeight="Bold"
                                          Foreground="{StaticResource SuccessColor}"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="Город" DisplayMemberBinding="{Binding Ad.City.CityName}" Width="120"/>
                    <GridViewColumn Header="Категория" DisplayMemberBinding="{Binding Ad.Category.CategoryName}" Width="150"/>
                </GridView>
            </ListView.View>
        </ListView>

        <!-- Кнопка Назад -->
        <Border Grid.Row="2"
                Background="{StaticResource SurfaceColor}"
                Padding="20,15"
                Margin="20,0,20,20">
            <Border.Effect>
                <DropShadowEffect ShadowDepth="1" BlurRadius="8" Opacity="0.1" Direction="270"/>
            </Border.Effect>
            <Button Content="Назад"
                   Width="140"
                   Height="40"
                   HorizontalAlignment="Right"
                   Style="{StaticResource SecondaryButton}"
                   Click="BtnBack_Click"/>
        </Border>
    </Grid>
</Window>